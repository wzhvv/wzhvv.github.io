<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>QT | HAO</title><meta name="author" content="wzhvv"><meta name="copyright" content="wzhvv"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="QT创建第一个QT程序 点击创建项目后，选择项目路径以及给项目起名称  名称 - 不能有中文 不能有空格  路径 - 不能有中文路径  默认创建有窗口类，myWidget，基类有三种选择：QWidget，QMainWindow，QDialog  main函数 QApplication a 应用程序对象，有且仅有一个 myWidget w 实例化窗口对象 w.show() 调用show函数，显示窗口">
<meta property="og:type" content="article">
<meta property="og:title" content="QT">
<meta property="og:url" content="http://example.com/2023/09/15/QT/index.html">
<meta property="og:site_name" content="HAO">
<meta property="og:description" content="QT创建第一个QT程序 点击创建项目后，选择项目路径以及给项目起名称  名称 - 不能有中文 不能有空格  路径 - 不能有中文路径  默认创建有窗口类，myWidget，基类有三种选择：QWidget，QMainWindow，QDialog  main函数 QApplication a 应用程序对象，有且仅有一个 myWidget w 实例化窗口对象 w.show() 调用show函数，显示窗口">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/avatar.png">
<meta property="article:published_time" content="2023-09-15T01:29:15.000Z">
<meta property="article:modified_time" content="2023-09-15T01:29:15.618Z">
<meta property="article:author" content="wzhvv">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/avatar.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2023/09/15/QT/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: wzhvv","link":"链接: ","source":"来源: HAO","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'QT',
  isPost: true,
  isHome: false,
  isHighlightShrink: undefined,
  isToc: true,
  postUpdate: '2023-09-15 09:29:15'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></div><div class="menus_item"><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="HAO"><span class="site-name">HAO</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></div><div class="menus_item"><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">QT</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-09-15T01:29:15.000Z" title="发表于 2023-09-15 09:29:15">2023-09-15</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-09-15T01:29:15.618Z" title="更新于 2023-09-15 09:29:15">2023-09-15</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="QT"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="QT"><a href="#QT" class="headerlink" title="QT"></a>QT</h1><h2 id="创建第一个QT程序"><a href="#创建第一个QT程序" class="headerlink" title="创建第一个QT程序"></a>创建第一个QT程序</h2><ol>
<li><p>点击创建项目后，选择项目路径以及给项目起名称</p>
</li>
<li><p>名称 - 不能有中文 不能有空格</p>
</li>
<li><p>路径 - 不能有中文路径</p>
</li>
<li><p>默认创建有窗口类，myWidget，基类有三种选择：QWidget，QMainWindow，QDialog</p>
</li>
<li><p>main函数</p>
<p>QApplication a 应用程序对象，有且仅有一个</p>
<p>myWidget w 实例化窗口对象</p>
<p>w.show() 调用show函数，显示窗口</p>
<p>return a.exec() 让应用程序对象进入消息循环机制中，代码阻塞到当前行</p>
</li>
</ol>
<h3 id="pro文件"><a href="#pro文件" class="headerlink" title=".pro文件"></a>.pro文件</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">QT       += core gui <span class="comment">//QT包含的模块</span></span><br><span class="line"><span class="built_in">greaterThan</span>(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets <span class="comment">//大于4版本以上 包含widget模块</span></span><br><span class="line"></span><br><span class="line">TARGET = <span class="number">01</span>_FirstProject <span class="comment">//目标 生成的.exe程序的名称</span></span><br><span class="line">TEMPLATE = app      <span class="comment">//模板 应用程序模板 Application</span></span><br><span class="line"></span><br><span class="line">SOURCES += \         <span class="comment">//源文件</span></span><br><span class="line">    main.cpp \</span><br><span class="line">    mywidget.cpp</span><br><span class="line"></span><br><span class="line">HEADERS += \         <span class="comment">//头文件</span></span><br><span class="line">    mywidget.h</span><br></pre></td></tr></table></figure>

<h3 id="h文件"><a href="#h文件" class="headerlink" title=".h文件"></a>.h文件</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MYMAINWINDOW_H <span class="comment">//相当于#pragma once防止重复包含</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MYMAINWINDOW_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMainWindow&gt;</span> <span class="comment">//包含头文件 QWidget 窗口类</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myMainWindow</span> : <span class="keyword">public</span> QMainWindow</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT <span class="comment">//Q_OBJECT宏，允许类中使用信号和槽的机制</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">myMainWindow</span>(QWidget *parent = <span class="literal">nullptr</span>); <span class="comment">//构造函数</span></span><br><span class="line">    ~<span class="built_in">myMainWindow</span>();  <span class="comment">//析构函数</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MYMAINWINDOW_H</span></span></span><br></pre></td></tr></table></figure>

<h3 id="cpp文件"><a href="#cpp文件" class="headerlink" title=".cpp文件"></a>.cpp文件</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mymainwindow.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span><span class="comment">//包含一个应用程序类的头文件</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//main程序的入口  argc命令行变量的数量  argv命令行变量的数组</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//a应用程序对象，在QT中，应用程序对象有且仅有一个</span></span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    <span class="comment">//窗口对象 myWidget-&gt;QWidget</span></span><br><span class="line">    myMainWindow w;</span><br><span class="line">    <span class="comment">//窗口对象 默认不会显示，必须调用show方法显示窗口</span></span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="comment">//让应用程序对象进入消息循环</span></span><br><span class="line">    <span class="comment">//让代码阻塞在这行</span></span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mymainwindow.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 命名规范</span></span><br><span class="line"><span class="comment">// 类名 首字母大写，单词和单词之间首字母大写</span></span><br><span class="line"><span class="comment">// 函数名 变量名称 首字母小写，单词和单词之间首字母大写</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//快捷键</span></span><br><span class="line"><span class="comment">//注释 ctrl + /</span></span><br><span class="line"><span class="comment">//运行 ctrl + r</span></span><br><span class="line"><span class="comment">//编译 ctrl + b</span></span><br><span class="line"><span class="comment">//字体调节 ctrl + 鼠标滚轮</span></span><br><span class="line"><span class="comment">//查找 ctrl + f</span></span><br><span class="line"><span class="comment">//整行移动 ctrl + shift + 上箭头 或 下箭头</span></span><br><span class="line"><span class="comment">//自动对齐 ctrl + i</span></span><br><span class="line"><span class="comment">//同名之间的.h 和 .cpp切换 F4</span></span><br><span class="line"><span class="comment">//帮助文档 1，F1 2，左侧按钮 3，E:\QT\5.15.2\mingw81_32\bin</span></span><br><span class="line"></span><br><span class="line">myMainWindow::<span class="built_in">myMainWindow</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QMainWindow</span>(parent)</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">myMainWindow::~<span class="built_in">myMainWindow</span>()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="QPushButton创建"><a href="#QPushButton创建" class="headerlink" title="QPushButton创建"></a>QPushButton创建</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> <span class="keyword">warning</span> (disable:4819)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;QPushButton&gt;</span> <span class="comment">//按钮控件的头文件</span></span></span><br><span class="line"></span><br><span class="line">myWidget::<span class="built_in">myWidget</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QWidget</span>(parent)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//创建一个按钮</span></span><br><span class="line">    QPushButton *btn=<span class="keyword">new</span> QPushButton;</span><br><span class="line">    <span class="comment">//btn-&gt;show(); //show以顶层方式弹出窗口控件</span></span><br><span class="line">    <span class="comment">//让btn对象 依赖在 myWidget窗口中</span></span><br><span class="line">    btn-&gt;<span class="built_in">setParent</span>(<span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">//显示文本</span></span><br><span class="line">    btn-&gt;<span class="built_in">setText</span>(<span class="string">&quot;first button&quot;</span>);</span><br><span class="line">    <span class="comment">//创建第二个按钮 按照控件的大小创建窗口</span></span><br><span class="line">    QPushButton * btn2=<span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;second button&quot;</span>,<span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">//移动btn2按钮</span></span><br><span class="line">    btn2-&gt;<span class="built_in">move</span>(<span class="number">100</span>,<span class="number">100</span>);</span><br><span class="line">    <span class="comment">//重置窗口大小</span></span><br><span class="line">    <span class="built_in">resize</span>(<span class="number">600</span>,<span class="number">400</span>);</span><br><span class="line">    <span class="comment">//设置固定窗口大小</span></span><br><span class="line">    <span class="built_in">setFixedSize</span>(<span class="number">600</span>,<span class="number">400</span>);</span><br><span class="line">    <span class="comment">//设置窗口标题</span></span><br><span class="line">    <span class="built_in">setWindowTitle</span>(<span class="string">&quot;first window&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">myWidget::~<span class="built_in">myWidget</span>()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="对象树"><a href="#对象树" class="headerlink" title="对象树"></a>对象树</h2><ol>
<li>当创建的对象在堆区时候，如果指定的父亲是QObject派生下来的类或者QObject子类派生下来的类，可以不用管理释放的操作，将对象会放入到对象树中。</li>
<li>一定程度上简化了内存回收机制</li>
</ol>
<h2 id="窗口坐标系"><a href="#窗口坐标系" class="headerlink" title="窗口坐标系"></a>窗口坐标系</h2><ul>
<li>以左上角为原点(0,0)，X向右增加，Y向下增加</li>
<li>对于嵌套窗口，其坐标是相对于父窗口来说的</li>
</ul>
<h2 id="信号和槽"><a href="#信号和槽" class="headerlink" title="信号和槽"></a>信号和槽</h2><h3 id="点击按钮关闭窗口"><a href="#点击按钮关闭窗口" class="headerlink" title="点击按钮关闭窗口"></a>点击按钮关闭窗口</h3><p>人     — 摩擦摩擦 —       神灯   — 出神灯</p>
<p>按钮 —     点击   —         窗口 — 关闭窗口</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">connect</span>(信号的发送者，发送的具体信号，信号的接受者，信号的处理(槽))</span><br><span class="line">信号槽的优点：松散耦合，信号发送端和接受端本身是没有关联的，通过connect连接，将两端耦合在一起    </span><br></pre></td></tr></table></figure>

<h3 id="自定义信号和槽"><a href="#自定义信号和槽" class="headerlink" title="自定义信号和槽"></a>自定义信号和槽</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">GirlFriend</span> : <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">GirlFriend</span><span class="params">(QObject *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">signals:</span><br><span class="line">    <span class="comment">//自定义信号 写到signals下</span></span><br><span class="line">    <span class="comment">//返回值是void，只需要声明，不需要定义</span></span><br><span class="line">    <span class="comment">//可以有参数，可以重载</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">hungry</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> : <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">MyClass</span><span class="params">(QObject *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    <span class="comment">//早期QT版本 必须写在public slots，高级版本写在public或者全局下</span></span><br><span class="line">    <span class="comment">//返回值 void 需要声明 也需要实现</span></span><br><span class="line">    <span class="comment">//可以有参数，可以发生重载</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">treat</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">signals:</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//创建一个女朋友对象</span></span><br><span class="line">    <span class="keyword">this</span>-&gt;gf=<span class="keyword">new</span> <span class="built_in">GirlFriend</span>(<span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">//创建一个我的对象</span></span><br><span class="line">    <span class="keyword">this</span>-&gt;mc=<span class="keyword">new</span> <span class="built_in">MyClass</span>(<span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">//女朋友饿了，我请客的链接</span></span><br><span class="line">    <span class="built_in">connect</span>(gf,&amp;GirlFriend::hungry,mc,&amp;MyClass::treat);</span><br><span class="line">    <span class="comment">//调用下课函数</span></span><br><span class="line">    <span class="built_in">classIsOver</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::classIsOver</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//下课后，调用后，触发女朋友饿了的信号</span></span><br><span class="line">    <span class="comment">//触发自定义信号，emit 自定义信号</span></span><br><span class="line">    emit gf-&gt;<span class="built_in">hungry</span>();</span><br></pre></td></tr></table></figure>

<h3 id="自定义信号和槽发生重载"><a href="#自定义信号和槽发生重载" class="headerlink" title="自定义信号和槽发生重载"></a>自定义信号和槽发生重载</h3><ul>
<li>需要利用函数指针，明确指向函数的地址(void (GirlFriend::*gfSignal)(QString)&#x3D;&amp;GirlFriend::hungry);</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//连接带参数的信号和槽</span></span><br><span class="line"><span class="comment">//指针 -&gt; 地址</span></span><br><span class="line"><span class="comment">//函数指针 -&gt; 函数地址</span></span><br><span class="line">    <span class="built_in">void</span>(GirlFriend::*girlfriendSignal)(QString)=&amp;GirlFriend::hungry;</span><br><span class="line">    <span class="built_in">void</span> (MyClass::*myclassSignal)(QString)=&amp;MyClass::treat;</span><br><span class="line">    <span class="built_in">connect</span>(gf,girlfriendSignal,mc,myclassSignal);</span><br><span class="line">    <span class="built_in">classIsOver</span>();</span><br><span class="line"></span><br><span class="line">    emit gf-&gt;<span class="built_in">hungry</span>(<span class="string">&quot;kongbao chicken&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>QString 转成 char *</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//QString -&gt; char * 先转成QByteArray (.toUtf8()) 再转成char *(.data())</span></span><br><span class="line">    <span class="built_in">qDebug</span>()&lt;&lt;<span class="string">&quot;请女朋友吃饭，女朋友要吃:&quot;</span>&lt;&lt;foodName.<span class="built_in">toUtf8</span>().<span class="built_in">data</span>();</span><br></pre></td></tr></table></figure>

<h3 id="信号连接信号"><a href="#信号连接信号" class="headerlink" title="信号连接信号"></a>信号连接信号</h3><ul>
<li>信号可以连接信号</li>
<li>断开信号：disconnect</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//点击一个下课的按钮，再触发下课</span></span><br><span class="line">QPushButton *btn=<span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;下课&quot;</span>,<span class="keyword">this</span>);</span><br><span class="line"><span class="keyword">this</span>-&gt;<span class="built_in">resize</span>(<span class="number">600</span>,<span class="number">400</span>);</span><br><span class="line"><span class="comment">//connect(btn,&amp;QPushButton::clicked,this,&amp;Widget::classIsOver);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//无参信号和槽连接</span></span><br><span class="line"><span class="built_in">void</span>(GirlFriend::*girlfriendSignal2)(<span class="type">void</span>)=&amp;GirlFriend::hungry;</span><br><span class="line"><span class="built_in">void</span> (MyClass::*myclassSignal2)(<span class="type">void</span>)=&amp;MyClass::treat;</span><br><span class="line"><span class="built_in">connect</span>(gf,girlfriendSignal2,mc,myclassSignal2);</span><br><span class="line"><span class="comment">//信号连接信号</span></span><br><span class="line"><span class="built_in">connect</span>(btn,&amp;QPushButton::clicked,gf,girlfriendSignal2);</span><br><span class="line"><span class="comment">//断开信号</span></span><br><span class="line"><span class="built_in">disconnect</span>(gf,girlfriendSignal2,mc,myclassSignal2);</span><br></pre></td></tr></table></figure>

<h3 id="Lambda表达式"><a href="#Lambda表达式" class="headerlink" title="Lambda表达式"></a>Lambda表达式</h3><ul>
<li><p>用于定义并创建匿名的函数对象，以简化编程工作</p>
</li>
<li><p>[函数对象参数] (操作符重载函数参数) {函数体}</p>
</li>
</ul>
<blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">一，函数对象参数：</span><br><span class="line">[]，标识一个Lambda的开始，不能省略。函数对象参数是传递给编译器自动生成的函数对象类的构造函数的。函数对象参数有以下形式：</span><br><span class="line"><span class="number">1</span>，空。没有使用任何函数对象参数。</span><br><span class="line"><span class="number">2</span>，=。按值传递所有局部变量。</span><br><span class="line"><span class="number">3</span>，&amp;。按引用传递所有局部变量。</span><br><span class="line"><span class="number">4</span>，<span class="keyword">this</span>。函数体内可以使用Lambda所在类中的成员变量。类似于=。</span><br><span class="line"><span class="number">5</span>，a。将a按值传递。按值传递时，函数体内不能修改传递进来的a的拷贝，因为默认情况下函数是<span class="type">const</span>的。要修改传递进来的a的拷贝，可以添加<span class="keyword">mutable</span>修饰符。</span><br><span class="line">QPushButton *btn2=<span class="keyword">new</span> QPushButton;</span><br><span class="line">[btn]()&#123;</span><br><span class="line">  btn-&gt;<span class="built_in">setText</span>(<span class="string">&quot;aaaa&quot;</span>);</span><br><span class="line">  btn2-&gt;<span class="built_in">setText</span>(<span class="string">&quot;bbbb&quot;</span>); <span class="comment">//btn2看不到</span></span><br><span class="line">&#125;();</span><br><span class="line"><span class="number">6</span>，&amp;a。将a按引用进行传递。</span><br><span class="line"><span class="number">7</span>，a,&amp;b。将a按值传递，b按引用进行传递。</span><br><span class="line"><span class="number">8</span>，=,&amp;a,&amp;b。除a和b按引用进行传递外，其他参数都按值进行传递。</span><br><span class="line"><span class="number">9</span>，&amp;,a,b。除a和b按值进行传递外，其他参数都按引用进行传递。</span><br><span class="line">二，操作符重载函数参数：</span><br><span class="line">标识重载的()操作符的参数，可以省略。参数可以通过按值(如：(a,b))和按引用(如：(&amp;a,&amp;b))两种方式进行传递。</span><br><span class="line">三，可修改标识符：</span><br><span class="line"><span class="keyword">mutable</span>声明，可以省略。按值传递函数对象时，加上<span class="keyword">mutable</span>修饰符后，可以修改按值传递进来的拷贝(能修改拷贝，不是值本身)</span><br><span class="line">四，函数返回值：</span><br><span class="line">-&gt;返回值类型，标识函数返回值的类型，当返回值为<span class="type">void</span>或者函数体中只有一处<span class="keyword">return</span>的地方(此时编译器可以自动推断出返回值类型)时，这部分可以省略。</span><br><span class="line">    <span class="type">int</span> ret=[]()-&gt;<span class="type">int</span>&#123;<span class="keyword">return</span> <span class="number">1000</span>;&#125;();</span><br><span class="line">    <span class="built_in">qDebug</span>()&lt;&lt;<span class="string">&quot;ret=&quot;</span>&lt;&lt;ret;</span><br><span class="line">五，函数体：</span><br><span class="line">&#123;&#125;，标识函数的实现，这部分不能省略，但函数体可以为空。    </span><br><span class="line">  </span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="QMainWindow"><a href="#QMainWindow" class="headerlink" title="QMainWindow"></a>QMainWindow</h2><ul>
<li>QMainWindow是一个为用户提供主窗口程序的类，包含一个菜单栏(menu bar)，多个工具栏(tool bars)，多个锚接部件(dock widgets)，一个状态栏(status bar)及一个中心部件(central widget)，是许多应用程序的基础，如文本编辑器，图片编辑器。</li>
</ul>
<h3 id="资源文件"><a href="#资源文件" class="headerlink" title="资源文件"></a>资源文件</h3><ol>
<li>将图片文件拷贝到项目位置下</li>
<li>右键项目-&gt;添加新文件-&gt;Qt-&gt;Qt recourse file -&gt;给文件起名</li>
<li>res 生成 res.qrc</li>
<li>open in editor 编辑资源</li>
<li>添加前缀 添加文件</li>
<li>使用 “：+前缀名 + 文件名”</li>
</ol>
<h3 id="界面布局"><a href="#界面布局" class="headerlink" title="界面布局"></a>界面布局</h3><ol>
<li>实现登录窗口</li>
<li>利用布局方式，给窗口进行美化</li>
<li>选取widget进行布局，水平布局，垂直布局，栅格布局、</li>
<li>给用户名，密码，登录，退出按钮进行布局</li>
<li>默认窗口和控件之间有间隙，可以调整layoutLeftMargin</li>
<li>利用弹簧进行布局</li>
</ol>
<h3 id="控件"><a href="#控件" class="headerlink" title="控件"></a>控件</h3><h4 id="按钮组"><a href="#按钮组" class="headerlink" title="按钮组"></a>按钮组</h4><ol>
<li>QPushButton 常用按钮</li>
<li>QToolButton 工具按钮 用于显示图片，如图想显示文字，修改风格；toolButtonStyle，突起风格：autoRaise</li>
<li>radioButton 单选按钮，设置默认 ui-&gt;rBtnMan-&gt;setChecked(ture);</li>
<li>checkbox 多选按钮，监听状态，2，选中 1，半选  0，未选中</li>
</ol>
<h4 id="QListWidget列表容器"><a href="#QListWidget列表容器" class="headerlink" title="QListWidget列表容器"></a>QListWidget列表容器</h4><ol>
<li>QListWidgetItem *item 一行内容</li>
<li>ui-&gt;listWidget-&gt;addItem(item)</li>
<li>设置居中方式 item-&gt;setTextAlignment(Qt::AlignHCenter)</li>
<li>可以利用addItems 一次性添加整个诗内容</li>
</ol>
<h4 id="QTreeWidget数控件"><a href="#QTreeWidget数控件" class="headerlink" title="QTreeWidget数控件"></a>QTreeWidget数控件</h4><ol>
<li>设置头：ui-&gt;treeWidget-&gt;setHeaderLabels(QStringList()&lt;&lt;”英雄”&lt;&lt;”英雄介绍”)</li>
<li>创建根节点：QTreeWidgetItem *liItem&#x3D;new QTreeWidgetItem(QStringList()&lt;&lt;”力量”)</li>
<li>添加根节点到树控件上：ui-&gt;treeWidget-&gt;addTopLevelItem(liItem)</li>
<li>添加子节点：Item-&gt;addChild(l1)</li>
</ol>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//treeWidget树控件使用</span></span><br><span class="line">    <span class="comment">//设置水平头</span></span><br><span class="line">    ui-&gt;treeWidget-&gt;<span class="built_in">setHeaderLabels</span>(<span class="built_in">QStringList</span>()&lt;&lt;<span class="string">&quot;英雄&quot;</span>&lt;&lt;<span class="string">&quot;英雄介绍&quot;</span>);</span><br><span class="line"></span><br><span class="line">    QTreeWidgetItem *liItem=<span class="keyword">new</span> <span class="built_in">QTreeWidgetItem</span>(<span class="built_in">QStringList</span>()&lt;&lt;<span class="string">&quot;力量&quot;</span>);</span><br><span class="line">    QTreeWidgetItem *minItem=<span class="keyword">new</span> <span class="built_in">QTreeWidgetItem</span>(<span class="built_in">QStringList</span>()&lt;&lt;<span class="string">&quot;敏捷&quot;</span>);</span><br><span class="line">    QTreeWidgetItem *zhiItem=<span class="keyword">new</span> <span class="built_in">QTreeWidgetItem</span>(<span class="built_in">QStringList</span>()&lt;&lt;<span class="string">&quot;智力&quot;</span>);</span><br><span class="line">    <span class="comment">//加载顶层的节点</span></span><br><span class="line">    ui-&gt;treeWidget-&gt;<span class="built_in">addTopLevelItem</span>(liItem);</span><br><span class="line">    ui-&gt;treeWidget-&gt;<span class="built_in">addTopLevelItem</span>(minItem);</span><br><span class="line">    ui-&gt;treeWidget-&gt;<span class="built_in">addTopLevelItem</span>(zhiItem);</span><br><span class="line">    <span class="comment">//追加子节点</span></span><br><span class="line">    QStringList heroL1;</span><br><span class="line">    heroL1&lt;&lt;<span class="string">&quot;刚被猪 &quot;</span>&lt;&lt;<span class="string">&quot;前排坦克，能在吸收伤害的同时造成可观的范围输出 &quot;</span>;</span><br><span class="line">    QTreeWidgetItem *l1=<span class="keyword">new</span> <span class="built_in">QTreeWidgetItem</span>(heroL1);</span><br><span class="line">    liItem-&gt;<span class="built_in">addChild</span>(l1);</span><br><span class="line">    QStringList heroL2;</span><br><span class="line">    heroL2&lt;&lt;<span class="string">&quot;船长 &quot;</span>&lt;&lt;<span class="string">&quot;前排坦克，能肉能输出能控场的全能英雄 &quot;</span>;</span><br><span class="line">    QTreeWidgetItem *l2=<span class="keyword">new</span> <span class="built_in">QTreeWidgetItem</span>(heroL2);</span><br><span class="line">    liItem-&gt;<span class="built_in">addChild</span>(l2);</span><br><span class="line"></span><br><span class="line">    QStringList herom1;</span><br><span class="line">    herom1&lt;&lt;<span class="string">&quot;月骑 &quot;</span>&lt;&lt;<span class="string">&quot;中排物理输出，可以使用分裂利刃攻击多个目标 &quot;</span>;</span><br><span class="line">    QTreeWidgetItem *m1=<span class="keyword">new</span> <span class="built_in">QTreeWidgetItem</span>(herom1);</span><br><span class="line">    minItem-&gt;<span class="built_in">addChild</span>(m1);</span><br><span class="line">    QStringList herom2;</span><br><span class="line">    herom2&lt;&lt;<span class="string">&quot;小鱼人 &quot;</span>&lt;&lt;<span class="string">&quot;前排战士，擅长偷取敌人的属性来增强自身战力 &quot;</span>;</span><br><span class="line">    QTreeWidgetItem *m2=<span class="keyword">new</span> <span class="built_in">QTreeWidgetItem</span>(herom2);</span><br><span class="line">    minItem-&gt;<span class="built_in">addChild</span>(m2);</span><br><span class="line"></span><br><span class="line">    QStringList heroz1;</span><br><span class="line">    heroz1&lt;&lt;<span class="string">&quot;死灵法师 &quot;</span>&lt;&lt;<span class="string">&quot;前排法师坦克，魔法抗性较高，拥有治疗技能 &quot;</span>;</span><br><span class="line">    QTreeWidgetItem *z1=<span class="keyword">new</span> <span class="built_in">QTreeWidgetItem</span>(heroz1);</span><br><span class="line">    zhiItem-&gt;<span class="built_in">addChild</span>(z1);</span><br><span class="line">    QStringList heroz2;</span><br><span class="line">    heroz2&lt;&lt;<span class="string">&quot;巫医 &quot;</span>&lt;&lt;<span class="string">&quot;后排辅助法师，可以使用奇特的巫术诅咒敌人与治疗队友 &quot;</span>;</span><br><span class="line">    QTreeWidgetItem *z2=<span class="keyword">new</span> <span class="built_in">QTreeWidgetItem</span>(heroz2);</span><br><span class="line">    zhiItem-&gt;<span class="built_in">addChild</span>(z2);</span><br></pre></td></tr></table></figure>

<h4 id="QTableWidget表格控件"><a href="#QTableWidget表格控件" class="headerlink" title="QTableWidget表格控件"></a>QTableWidget表格控件</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//TableWidget控件</span></span><br><span class="line">    ui-&gt;tableWidget-&gt;<span class="built_in">setColumnCount</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="comment">//设置水平表头</span></span><br><span class="line">    ui-&gt;tableWidget-&gt;<span class="built_in">setHorizontalHeaderLabels</span>(<span class="built_in">QStringList</span>()&lt;&lt;<span class="string">&quot;姓名&quot;</span>&lt;&lt;<span class="string">&quot;性别&quot;</span>&lt;&lt;<span class="string">&quot;年龄&quot;</span>);</span><br><span class="line">    <span class="comment">//设置行数</span></span><br><span class="line">    ui-&gt;tableWidget-&gt;<span class="built_in">setRowCount</span>(<span class="number">5</span>);</span><br><span class="line">    <span class="comment">//设置正文</span></span><br><span class="line">    QStringList nameList;</span><br><span class="line">    nameList&lt;&lt;<span class="string">&quot; 亚瑟 &quot;</span>&lt;&lt;<span class="string">&quot; 安琪拉 &quot;</span>&lt;&lt;<span class="string">&quot; 李白 &quot;</span>&lt;&lt;<span class="string">&quot; 王昭君 &quot;</span>&lt;&lt;<span class="string">&quot; 孙悟空 &quot;</span>;</span><br><span class="line"></span><br><span class="line">    QList&lt;QString&gt; sexList;</span><br><span class="line">    sexList&lt;&lt;<span class="string">&quot; 男 &quot;</span>&lt;&lt;<span class="string">&quot; 女 &quot;</span>&lt;&lt;<span class="string">&quot; 男 &quot;</span>&lt;&lt;<span class="string">&quot; 女 &quot;</span>&lt;&lt;<span class="string">&quot; 中立 &quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> col=<span class="number">0</span>;</span><br><span class="line">        ui-&gt;tableWidget-&gt;<span class="built_in">setItem</span>(i,col++,<span class="keyword">new</span> <span class="built_in">QTableWidgetItem</span>(nameList[i]));</span><br><span class="line">        ui-&gt;tableWidget-&gt;<span class="built_in">setItem</span>(i,col++,<span class="keyword">new</span> <span class="built_in">QTableWidgetItem</span>(sexList[i]));</span><br><span class="line">        <span class="comment">//int 转 QString</span></span><br><span class="line">        ui-&gt;tableWidget-&gt;<span class="built_in">setItem</span>(i,col++,<span class="keyword">new</span> <span class="built_in">QTableWidgetItem</span>(QString::<span class="built_in">number</span>(i+<span class="number">18</span>)));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="其他控件"><a href="#其他控件" class="headerlink" title="其他控件"></a>其他控件</h4><ul>
<li>stackedWidget  栈控件：</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//设置默认定位 scrollArea</span></span><br><span class="line">    ui-&gt;stackedWidget-&gt;<span class="built_in">setCurrentIndex</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="comment">//scrollArea按钮</span></span><br><span class="line">    <span class="built_in">connect</span>(ui-&gt;SA_Btn,&amp;QPushButton::clicked,[=]()&#123;</span><br><span class="line">        ui-&gt;stackedWidget-&gt;<span class="built_in">setCurrentIndex</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">connect</span>(ui-&gt;TB_Btn,&amp;QPushButton::clicked,[=]()&#123;</span><br><span class="line">        ui-&gt;stackedWidget-&gt;<span class="built_in">setCurrentIndex</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">connect</span>(ui-&gt;TW_Btn,&amp;QPushButton::clicked,[=]()&#123;</span><br><span class="line">        ui-&gt;stackedWidget-&gt;<span class="built_in">setCurrentIndex</span>(<span class="number">2</span>);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>comboBox 下拉框：</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">ui-&gt;comboBox-&gt;<span class="built_in">addItem</span>(<span class="string">&quot;宝马 &quot;</span>);</span><br><span class="line">    ui-&gt;comboBox-&gt;<span class="built_in">addItem</span>(<span class="string">&quot;奔驰 &quot;</span>);</span><br><span class="line">    ui-&gt;comboBox-&gt;<span class="built_in">addItem</span>(<span class="string">&quot;拖拉机 &quot;</span>);</span><br><span class="line">    <span class="comment">//点击按钮 选中拖拉机选项</span></span><br><span class="line">    <span class="built_in">connect</span>(ui-&gt;CB_Btn,&amp;QPushButton::clicked,[=]()&#123;</span><br><span class="line">        <span class="comment">//ui-&gt;comboBox-&gt;setCurrentIndex(2);</span></span><br><span class="line">        ui-&gt;comboBox-&gt;<span class="built_in">setCurrentText</span>(<span class="string">&quot;拖拉机 &quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>QLabel显示图片</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">ui-&gt;lbl_image-&gt;<span class="built_in">setPixmap</span>(<span class="built_in">QPixmap</span>(<span class="string">&quot;:/Saved Pictures/ws_2670752772_thumb.jpg&quot;</span>));</span><br><span class="line">如图片显示不全：选中scaledContents自适应</span><br></pre></td></tr></table></figure>

<ul>
<li>QLabel显示动图 gif图片</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">QMovie *movie=<span class="keyword">new</span> <span class="built_in">QMovie</span>(<span class="string">&quot;:/Saved Pictures/c5fc04a186ac48f5a05bbaebb31727ae.gif&quot;</span>);</span><br><span class="line">    ui-&gt;lbl_movie-&gt;<span class="built_in">setMovie</span>(movie);</span><br><span class="line">    <span class="comment">//播放动图</span></span><br><span class="line">    movie-&gt;<span class="built_in">start</span>();</span><br></pre></td></tr></table></figure>

<h2 id="Qt中的事件"><a href="#Qt中的事件" class="headerlink" title="Qt中的事件"></a>Qt中的事件</h2><h3 id="鼠标事件"><a href="#鼠标事件" class="headerlink" title="鼠标事件"></a>鼠标事件</h3><ol>
<li>鼠标进入事件：enterEvent</li>
<li>鼠标离开事件：leaveEvent</li>
<li>鼠标按下：mousePressEvent(QMouseEvent *ev)</li>
<li>鼠标释放：mouseReleaseEvent</li>
<li>鼠标移动：mouseMoveEvent</li>
<li>ev-&gt;x() x坐标  ev-.y() y坐标</li>
<li>ev-&gt;button() 可以判断所有按键 Qt::LeftButton Qt::RightButton</li>
<li>ev-&gt;buttons() 判断组合按键 判断move时候的左右键 结合&amp;操作符</li>
<li>格式化字符串 QString(“%1 %2”).arg(111).arg(222)</li>
</ol>
<h3 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//重写定时器的事件</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">timerEvent</span><span class="params">(QTimerEvent *e)</span></span>;</span><br><span class="line">    <span class="type">int</span> id1; <span class="comment">//定时器1的唯一标识</span></span><br><span class="line">    <span class="type">int</span> id2; <span class="comment">//定时器2的唯一标识</span></span><br><span class="line"></span><br><span class="line">ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">//启动定时器</span></span><br><span class="line">    id1=<span class="built_in">startTimer</span>(<span class="number">1000</span>); <span class="comment">//参数1 间隔 单位 毫秒</span></span><br><span class="line">    id2=<span class="built_in">startTimer</span>(<span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::timerEvent</span><span class="params">(QTimerEvent *e)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(e-&gt;<span class="built_in">timerId</span>()==id1)&#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> number=<span class="number">0</span>;</span><br><span class="line">    <span class="comment">//label_2 每隔1秒+1</span></span><br><span class="line">    ui-&gt;label_2-&gt;<span class="built_in">setText</span>(QString::<span class="built_in">number</span>(number++));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(e-&gt;<span class="built_in">timerId</span>()==id2)&#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> number2=<span class="number">0</span>;</span><br><span class="line">    <span class="comment">//label_3 每隔2秒+1</span></span><br><span class="line">    ui-&gt;label_3-&gt;<span class="built_in">setText</span>(QString::<span class="built_in">number</span>(number2++));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//定时器第二种方式</span></span><br><span class="line">    QTimer *timer=<span class="keyword">new</span> <span class="built_in">QTimer</span>(<span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">//启动定时器</span></span><br><span class="line">    timer-&gt;<span class="built_in">start</span>(<span class="number">500</span>);</span><br><span class="line">    <span class="built_in">connect</span>(timer,&amp;QTimer::timeout,[=]()&#123;</span><br><span class="line">        <span class="type">static</span> <span class="type">int</span> number3=<span class="number">0</span>;</span><br><span class="line">        <span class="comment">//label_4 每隔0.5秒+1</span></span><br><span class="line">        ui-&gt;label_4-&gt;<span class="built_in">setText</span>(QString::<span class="built_in">number</span>(number3++));</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//点击暂停按钮，实现停止定时器</span></span><br><span class="line">    <span class="built_in">connect</span>(ui-&gt;btn1,&amp;QPushButton::clicked,[=]()&#123;</span><br><span class="line">        timer-&gt;<span class="built_in">stop</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//点击启动按钮，实现启动定时器</span></span><br><span class="line">    <span class="built_in">connect</span>(ui-&gt;btn2,&amp;QPushButton::clicked,[=]()&#123;</span><br><span class="line">        timer-&gt;<span class="built_in">start</span>(<span class="number">500</span>);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="event事件分发器"><a href="#event事件分发器" class="headerlink" title="event事件分发器"></a>event事件分发器</h3><p><img src="https://raw.githubusercontent.com/wzhvv/image/main/image/202307221057680.png" alt="Snipaste_2023-07-22_10-52-01"></p>
<ol>
<li>用途：用于事件的分发</li>
<li>也可以做拦截操作，不建议</li>
<li>bool event(QEvent *e);</li>
<li>返回值 如果是true 代表用户处理这个事件，不向下分发了</li>
<li>e-&gt;type&#x3D;&#x3D;鼠标按下</li>
</ol>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">myLabel::event</span><span class="params">(QEvent *e)</span></span>&#123;</span><br><span class="line">    <span class="comment">//如果是鼠标按下。在event事件分发中做拦截操作</span></span><br><span class="line">    <span class="keyword">if</span>(e-&gt;<span class="built_in">type</span>()==QEvent::MouseButtonPress)&#123;</span><br><span class="line">        QMouseEvent *ev=<span class="built_in">static_cast</span>&lt;QMouseEvent *&gt;(e);</span><br><span class="line">        QString str=<span class="built_in">QString</span>(<span class="string">&quot;Event函数中，鼠标按下了 x=%1 y=%2 globalX=%3 globalY=%4&quot;</span>).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">x</span>()).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">y</span>()).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">globalX</span>()).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">globalY</span>());</span><br><span class="line">        <span class="built_in">qDebug</span>()&lt;&lt;str;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//true代表用户自己处理这个事件，不向下分发</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//其他事件 交给父类处理 默认处理</span></span><br><span class="line">    <span class="keyword">return</span> QLabel::<span class="built_in">event</span>(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="事件过滤器"><a href="#事件过滤器" class="headerlink" title="事件过滤器"></a>事件过滤器</h3><p><img src="https://raw.githubusercontent.com/wzhvv/image/main/image/202307221124552.png" alt="Snipaste_2023-07-22_11-24-25"></p>
<ol>
<li>在程序将时间分发到事件分发器前，可以利用过滤器做拦截</li>
<li>步骤：<ol>
<li>给控件安装事件过滤器</li>
<li>重写eventFilter函数(obj,ev)  <strong>&#x2F;&#x2F;obj用来判断控件，ev用来判断事件</strong></li>
</ol>
</li>
</ol>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//给label 安装事件过滤器</span></span><br><span class="line">    <span class="comment">//步骤1  安装事件过滤器</span></span><br><span class="line">    ui-&gt;label-&gt;<span class="built_in">installEventFilter</span>(<span class="keyword">this</span>);</span><br><span class="line"><span class="comment">//步骤2 重写eventfilter事件</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Widget::eventFilter</span><span class="params">(QObject *obj,QEvent *e)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(obj==ui-&gt;label)&#123;</span><br><span class="line">        <span class="comment">//如果是鼠标按下。在过滤器中做拦截操作</span></span><br><span class="line">        <span class="keyword">if</span>(e-&gt;<span class="built_in">type</span>()==QEvent::MouseButtonPress)&#123;</span><br><span class="line">            QMouseEvent *ev=<span class="built_in">static_cast</span>&lt;QMouseEvent *&gt;(e);</span><br><span class="line">            QString str=<span class="built_in">QString</span>(<span class="string">&quot;过滤器中，鼠标按下了 x=%1 y=%2 globalX=%3 globalY=%4&quot;</span>).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">x</span>()).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">y</span>()).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">globalX</span>()).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">globalY</span>());</span><br><span class="line">                          <span class="built_in">qDebug</span>()&lt;&lt;str;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//true代表用户自己处理这个事件，不向下分发</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//其他事件 交给父类处理 默认处理</span></span><br><span class="line">    <span class="keyword">return</span> QWidget::<span class="built_in">eventFilter</span>(obj,e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="QPainter绘图"><a href="#QPainter绘图" class="headerlink" title="QPainter绘图"></a>QPainter绘图</h3><ol>
<li>绘图事件 void paintEvent()</li>
<li>声明一个画家对象 QPainter painter(this) this指定绘图设备</li>
<li>画线 画圆 画矩形 画文字</li>
<li>设置画笔 QPen  设置画笔宽度，风格</li>
<li>设置画刷 QBrush 设置画刷风格</li>
</ol>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::paintEvent</span><span class="params">(QPaintEvent*)</span></span>&#123;</span><br><span class="line">    <span class="comment">//实例化画家对象 this指定的是绘图设备</span></span><br><span class="line">    <span class="function">QPainter <span class="title">painter</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置画笔</span></span><br><span class="line">    <span class="function">QPen <span class="title">pen</span><span class="params">(QColor(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>))</span></span>;</span><br><span class="line">    <span class="comment">//设置画笔宽度</span></span><br><span class="line">    pen.<span class="built_in">setWidth</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="comment">//设置画笔风格</span></span><br><span class="line">    pen.<span class="built_in">setStyle</span>(Qt::DotLine);</span><br><span class="line">    <span class="comment">//让画家 使用这个画笔</span></span><br><span class="line">    painter.<span class="built_in">setPen</span>(pen);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置画刷</span></span><br><span class="line">    <span class="function">QBrush <span class="title">brush</span><span class="params">(Qt::cyan)</span></span>;</span><br><span class="line">    <span class="comment">//设置画刷风格</span></span><br><span class="line">    brush.<span class="built_in">setStyle</span>(Qt::Dense7Pattern);</span><br><span class="line">    <span class="comment">//让画家使用画刷</span></span><br><span class="line">    painter.<span class="built_in">setBrush</span>(brush);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//画线</span></span><br><span class="line">    painter.<span class="built_in">drawLine</span>(<span class="built_in">QPoint</span>(<span class="number">0</span>,<span class="number">0</span>),<span class="built_in">QPoint</span>(<span class="number">100</span>,<span class="number">100</span>));</span><br><span class="line">    <span class="comment">//画圆</span></span><br><span class="line">    painter.<span class="built_in">drawEllipse</span>(<span class="built_in">QPoint</span>(<span class="number">100</span>,<span class="number">100</span>),<span class="number">50</span>,<span class="number">50</span>); <span class="comment">//Ellipse 椭圆</span></span><br><span class="line">    <span class="comment">//画矩形</span></span><br><span class="line">    <span class="comment">//painter.drawRect(QRect(QPoint(50,50),QPoint(100,100)));</span></span><br><span class="line">    <span class="comment">//painter.drawRect(QRect(QPoint(100,100),QSize(100,50)));</span></span><br><span class="line">    painter.<span class="built_in">drawRect</span>(<span class="built_in">QRect</span>(<span class="number">50</span>,<span class="number">50</span>,<span class="number">50</span>,<span class="number">50</span>));</span><br><span class="line">    <span class="comment">//画文字</span></span><br><span class="line">    painter.<span class="built_in">drawText</span>(<span class="built_in">QRect</span>(<span class="number">10</span>,<span class="number">200</span>,<span class="number">150</span>,<span class="number">50</span>),<span class="string">&quot;好好学习，天天向上 &quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="QPainter高级设置"><a href="#QPainter高级设置" class="headerlink" title="QPainter高级设置"></a>QPainter高级设置</h4><ol>
<li>抗锯齿 效率低：painter.setRenderHint()</li>
<li>对画家进行移动：painter.translate(100,0);</li>
<li>保存状态：save</li>
<li>还原状态：restore</li>
</ol>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">QPainter <span class="title">painter</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line">painter.<span class="built_in">drawEllipse</span>(<span class="built_in">QPoint</span>(<span class="number">100</span>,<span class="number">50</span>),<span class="number">50</span>,<span class="number">50</span>);</span><br><span class="line"><span class="comment">//设置抗锯齿能力 效率较低</span></span><br><span class="line">painter.<span class="built_in">setRenderHint</span>(QPainter::Antialiasing);</span><br><span class="line">painter.<span class="built_in">drawEllipse</span>(<span class="built_in">QPoint</span>(<span class="number">200</span>,<span class="number">50</span>),<span class="number">50</span>,<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//画矩形</span></span><br><span class="line">painter.<span class="built_in">drawRect</span>(<span class="built_in">QRect</span>(<span class="number">20</span>,<span class="number">20</span>,<span class="number">50</span>,<span class="number">50</span>));</span><br><span class="line"><span class="comment">//移动画家</span></span><br><span class="line">painter.<span class="built_in">translate</span>(<span class="number">100</span>,<span class="number">0</span>);</span><br><span class="line"><span class="comment">//保存画家状态</span></span><br><span class="line">painter.<span class="built_in">save</span>();</span><br><span class="line">painter.<span class="built_in">drawRect</span>(<span class="built_in">QRect</span>(<span class="number">20</span>,<span class="number">20</span>,<span class="number">50</span>,<span class="number">50</span>));</span><br><span class="line">painter.<span class="built_in">translate</span>(<span class="number">100</span>,<span class="number">0</span>);</span><br><span class="line"><span class="comment">//还原画家保存状态</span></span><br><span class="line">painter.<span class="built_in">restore</span>();</span><br><span class="line">painter.<span class="built_in">drawRect</span>(<span class="built_in">QRect</span>(<span class="number">20</span>,<span class="number">20</span>,<span class="number">50</span>,<span class="number">50</span>));</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>如果想手动调用绘图事件 利用update</li>
<li>利用画家画图片 painter.drawPixmap(x,y,QPixmap(“路径”))</li>
</ol>
<h4 id="绘图设备"><a href="#绘图设备" class="headerlink" title="绘图设备"></a>绘图设备</h4><ul>
<li><strong>绘图设备是指继承QPainterDevice的子类</strong>。Qt中一共提供了四个这样的类</li>
</ul>
<ol>
<li>QPixmap：专门为图像在屏幕上的显示做了优化</li>
</ol>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//QPixmap绘图设备 专门为平台做了显示的优化</span></span><br><span class="line"><span class="function">QPixmap <span class="title">pix</span><span class="params">(<span class="number">300</span>,<span class="number">300</span>)</span></span>;</span><br><span class="line"><span class="comment">//填充颜色</span></span><br><span class="line">pix.<span class="built_in">fill</span>(Qt::white);</span><br><span class="line"><span class="comment">//声明画家</span></span><br><span class="line"><span class="function">QPainter <span class="title">painter</span><span class="params">(&amp;pix)</span></span>;</span><br><span class="line">painter.<span class="built_in">setPen</span>(<span class="built_in">QPen</span>(Qt::green));</span><br><span class="line">painter.<span class="built_in">drawEllipse</span>(<span class="built_in">QPoint</span>(<span class="number">150</span>,<span class="number">150</span>),<span class="number">100</span>,<span class="number">100</span>);</span><br><span class="line"><span class="comment">//保存</span></span><br><span class="line">pix.<span class="built_in">save</span>(<span class="string">&quot;E:/QT/QT_Project/pix.png&quot;</span>);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>QBitmap：是QPixmap的一个子类，它的色深限定为1(只显示黑白)，可以使用QPixmap的isQBitmap()函数来确定这个QPixmap是不是一个QBitmap</p>
</li>
<li><p>QImage：专门为图像的像素级访问做了优化</p>
</li>
</ol>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">    <span class="comment">//QImage绘图设备 可以对像素进行访问</span></span><br><span class="line">    <span class="function">QImage <span class="title">image</span><span class="params">(<span class="number">300</span>,<span class="number">300</span>,QImage::Format_RGB32)</span></span>;</span><br><span class="line">    <span class="comment">//声明画家</span></span><br><span class="line">    <span class="function">QPainter <span class="title">painter</span><span class="params">(&amp;image)</span></span>;</span><br><span class="line">    painter.<span class="built_in">setPen</span>(<span class="built_in">QPen</span>(Qt::blue));</span><br><span class="line">    painter.<span class="built_in">drawEllipse</span>(<span class="built_in">QPoint</span>(<span class="number">150</span>,<span class="number">150</span>),<span class="number">100</span>,<span class="number">100</span>);</span><br><span class="line">    <span class="comment">//保存</span></span><br><span class="line">    image.<span class="built_in">save</span>(<span class="string">&quot;E:/QT/QT_Project/image.png&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//绘图事件里</span></span><br><span class="line">    <span class="function">QPainter <span class="title">painter</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line">    <span class="comment">//利用QImage 对像素进行修改</span></span><br><span class="line">    QImage img;</span><br><span class="line">    img.<span class="built_in">load</span>(<span class="string">&quot;:/Saved Pictures/ws_2994142969_thumb.jpg&quot;</span>);</span><br><span class="line">    <span class="comment">//修改像素点</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">50</span>;i&lt;<span class="number">100</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">50</span>;j&lt;<span class="number">100</span>;j++)&#123;</span><br><span class="line">            QRgb value=<span class="built_in">qRgb</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">255</span>);</span><br><span class="line">            img.<span class="built_in">setPixel</span>(i,j,value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    painter.<span class="built_in">drawImage</span>(<span class="number">0</span>,<span class="number">0</span>,img);</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>QPicture：可以记录和重现QPainter的各条命令</li>
</ol>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//QPicture 绘图设备 可以记录和重现 绘图指令</span></span><br><span class="line">    QPicture pic;</span><br><span class="line">    QPainter painter;</span><br><span class="line">    painter.<span class="built_in">begin</span>(&amp;pic);<span class="comment">//开始往pic上画</span></span><br><span class="line">    painter.<span class="built_in">setPen</span>(<span class="built_in">QPen</span>(Qt::cyan));</span><br><span class="line">    painter.<span class="built_in">drawEllipse</span>(<span class="built_in">QPoint</span>(<span class="number">150</span>,<span class="number">150</span>),<span class="number">100</span>,<span class="number">100</span>);</span><br><span class="line">    painter.<span class="built_in">end</span>();<span class="comment">//结束画画</span></span><br><span class="line">    <span class="comment">//保存到磁盘</span></span><br><span class="line">    pic.<span class="built_in">save</span>(<span class="string">&quot;E:/QT/QT_Project/picture.wzh&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//绘图事件里</span></span><br><span class="line"><span class="function">QPainter <span class="title">painter</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line">    <span class="comment">//重现QPicture的绘图指令</span></span><br><span class="line">    QPicture pic;</span><br><span class="line">    pic.<span class="built_in">load</span>(<span class="string">&quot;E:/QT/QT_Project/picture.wzh&quot;</span>);</span><br><span class="line">    painter.<span class="built_in">drawPicture</span>(<span class="number">0</span>,<span class="number">0</span>,pic);</span><br></pre></td></tr></table></figure>

<h3 id="QFile"><a href="#QFile" class="headerlink" title="QFile"></a>QFile</h3><h4 id="QFile进行读写操作"><a href="#QFile进行读写操作" class="headerlink" title="QFile进行读写操作"></a>QFile进行读写操作</h4><ol>
<li>QFile file(path 文件路径)</li>
<li>读</li>
</ol>
<ul>
<li><p>file.open(打开方式)QIODevice::readOnly</p>
</li>
<li><p>全部读取 file.readAll()  按行读file.readLine()  atend()判断是否读到文件尾</p>
</li>
<li><p>默认支持编码格式  utf-8</p>
</li>
<li><p>利用编码格式类 指定格式 QTextCodec</p>
</li>
<li><p>QTextCodec *codec&#x3D;QTextCodec::codecForName(“gbk”);</p>
<p>ui-&gt;textEdit-&gt;setText(codec-&gt;toUnicode(array))</p>
</li>
<li><p>文件对象关闭 close</p>
</li>
</ul>
<ol start="3">
<li>写</li>
</ol>
<ul>
<li>file.open(QIODevice::writeOnly &#x2F; Append)</li>
<li>file.write(内容)</li>
<li>file.close 关闭</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//点击选取文件按钮，弹出文件对话框</span></span><br><span class="line">    <span class="built_in">connect</span>(ui-&gt;pushButton,&amp;QPushButton::clicked,[=]()&#123;</span><br><span class="line">        QString path=QFileDialog::<span class="built_in">getOpenFileName</span>(<span class="keyword">this</span>,<span class="string">&quot;打开文件&quot;</span>,<span class="string">&quot;C:\\Users\\27458\\Desktop&quot;</span>);</span><br><span class="line">        <span class="comment">//将路径放入到lineEdit中</span></span><br><span class="line">        ui-&gt;lineEdit-&gt;<span class="built_in">setText</span>(path);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//编码格式类</span></span><br><span class="line">        <span class="comment">//QTextCodec *codec=QTextCodec::codecForName(&quot;gbk&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//读取内容，放入到textEdit中</span></span><br><span class="line">        <span class="comment">//QFile默认支持的格式是 utf-8</span></span><br><span class="line">        QFile <span class="built_in">file</span>(path); <span class="comment">//参数为读取文件的路径</span></span><br><span class="line">        <span class="comment">//设置打开方式</span></span><br><span class="line">        file.<span class="built_in">open</span>(QIODevice::ReadOnly);</span><br><span class="line">        <span class="comment">//QByteArray array=file.readAll();</span></span><br><span class="line">        QByteArray array;</span><br><span class="line">        <span class="keyword">while</span>(!file.<span class="built_in">atEnd</span>())&#123;</span><br><span class="line">            array+=file.<span class="built_in">readLine</span>(); <span class="comment">//按行读</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//将读取到的数据 放入textEdit中</span></span><br><span class="line">        ui-&gt;textEdit-&gt;<span class="built_in">setText</span>(array);</span><br><span class="line">        <span class="comment">//ui-&gt;textEdit-&gt;setText(codec-&gt;toUnicode(array));</span></span><br><span class="line">        <span class="comment">//对文件对象进行关闭</span></span><br><span class="line">        file.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//进行写文件</span></span><br><span class="line">        file.<span class="built_in">open</span>(QIODevice::Append); <span class="comment">//用追加方式进行写</span></span><br><span class="line">        file.<span class="built_in">write</span>(<span class="string">&quot;哦哦哦哦哦 &quot;</span>);</span><br><span class="line">        file.<span class="built_in">close</span>();</span><br></pre></td></tr></table></figure>

<h4 id="QFileInfo文件读取信息"><a href="#QFileInfo文件读取信息" class="headerlink" title="QFileInfo文件读取信息"></a>QFileInfo文件读取信息</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">QFileInfo <span class="title">info</span><span class="params">(path)</span></span>;</span><br><span class="line">        <span class="built_in">qDebug</span>()&lt;&lt;<span class="string">&quot;大小: &quot;</span>&lt;&lt;info.<span class="built_in">size</span>()&lt;&lt;<span class="string">&quot;后缀名: &quot;</span>&lt;&lt;info.<span class="built_in">suffix</span>()&lt;&lt;<span class="string">&quot;文件名称: &quot;</span>&lt;&lt;info.<span class="built_in">fileName</span>()&lt;&lt;<span class="string">&quot;文件路径: &quot;</span>&lt;&lt;info.<span class="built_in">filePath</span>();</span><br><span class="line">        <span class="built_in">qDebug</span>()&lt;&lt;<span class="string">&quot;创建日期: &quot;</span>&lt;&lt;info.<span class="built_in">created</span>().<span class="built_in">toString</span>(<span class="string">&quot;yyyy-MM-dd hh:mm:ss&quot;</span>);</span><br><span class="line">        <span class="built_in">qDebug</span>()&lt;&lt;<span class="string">&quot;最后更新日期: &quot;</span>&lt;&lt;info.<span class="built_in">lastModified</span>().<span class="built_in">toString</span>(<span class="string">&quot;yyyy-MM-dd hh:mm:ss&quot;</span>);</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">wzhvv</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2023/09/15/QT/">http://example.com/2023/09/15/QT/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">HAO</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="/img/avatar.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2023/03/23/JavaWeb/" title="JavaWeb开发"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">JavaWeb开发</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">wzhvv</div><div class="author-info__description">学海无涯苦作舟</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/wzhvv"><i class="wzhvv-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/wzhvv" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:2745853490@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#QT"><span class="toc-number">1.</span> <span class="toc-text">QT</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AAQT%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.1.</span> <span class="toc-text">创建第一个QT程序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#pro%E6%96%87%E4%BB%B6"><span class="toc-number">1.1.1.</span> <span class="toc-text">.pro文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#h%E6%96%87%E4%BB%B6"><span class="toc-number">1.1.2.</span> <span class="toc-text">.h文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cpp%E6%96%87%E4%BB%B6"><span class="toc-number">1.1.3.</span> <span class="toc-text">.cpp文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#QPushButton%E5%88%9B%E5%BB%BA"><span class="toc-number">1.2.</span> <span class="toc-text">QPushButton创建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%A0%91"><span class="toc-number">1.3.</span> <span class="toc-text">对象树</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AA%97%E5%8F%A3%E5%9D%90%E6%A0%87%E7%B3%BB"><span class="toc-number">1.4.</span> <span class="toc-text">窗口坐标系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%A1%E5%8F%B7%E5%92%8C%E6%A7%BD"><span class="toc-number">1.5.</span> <span class="toc-text">信号和槽</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%82%B9%E5%87%BB%E6%8C%89%E9%92%AE%E5%85%B3%E9%97%AD%E7%AA%97%E5%8F%A3"><span class="toc-number">1.5.1.</span> <span class="toc-text">点击按钮关闭窗口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BF%A1%E5%8F%B7%E5%92%8C%E6%A7%BD"><span class="toc-number">1.5.2.</span> <span class="toc-text">自定义信号和槽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BF%A1%E5%8F%B7%E5%92%8C%E6%A7%BD%E5%8F%91%E7%94%9F%E9%87%8D%E8%BD%BD"><span class="toc-number">1.5.3.</span> <span class="toc-text">自定义信号和槽发生重载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E5%8F%B7%E8%BF%9E%E6%8E%A5%E4%BF%A1%E5%8F%B7"><span class="toc-number">1.5.4.</span> <span class="toc-text">信号连接信号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.5.5.</span> <span class="toc-text">Lambda表达式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#QMainWindow"><span class="toc-number">1.6.</span> <span class="toc-text">QMainWindow</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6"><span class="toc-number">1.6.1.</span> <span class="toc-text">资源文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80"><span class="toc-number">1.6.2.</span> <span class="toc-text">界面布局</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E4%BB%B6"><span class="toc-number">1.6.3.</span> <span class="toc-text">控件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E9%92%AE%E7%BB%84"><span class="toc-number">1.6.3.1.</span> <span class="toc-text">按钮组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#QListWidget%E5%88%97%E8%A1%A8%E5%AE%B9%E5%99%A8"><span class="toc-number">1.6.3.2.</span> <span class="toc-text">QListWidget列表容器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#QTreeWidget%E6%95%B0%E6%8E%A7%E4%BB%B6"><span class="toc-number">1.6.3.3.</span> <span class="toc-text">QTreeWidget数控件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#QTableWidget%E8%A1%A8%E6%A0%BC%E6%8E%A7%E4%BB%B6"><span class="toc-number">1.6.3.4.</span> <span class="toc-text">QTableWidget表格控件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E6%8E%A7%E4%BB%B6"><span class="toc-number">1.6.3.5.</span> <span class="toc-text">其他控件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Qt%E4%B8%AD%E7%9A%84%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.7.</span> <span class="toc-text">Qt中的事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%BC%A0%E6%A0%87%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.7.1.</span> <span class="toc-text">鼠标事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="toc-number">1.7.2.</span> <span class="toc-text">定时器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#event%E4%BA%8B%E4%BB%B6%E5%88%86%E5%8F%91%E5%99%A8"><span class="toc-number">1.7.3.</span> <span class="toc-text">event事件分发器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">1.7.4.</span> <span class="toc-text">事件过滤器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#QPainter%E7%BB%98%E5%9B%BE"><span class="toc-number">1.7.5.</span> <span class="toc-text">QPainter绘图</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#QPainter%E9%AB%98%E7%BA%A7%E8%AE%BE%E7%BD%AE"><span class="toc-number">1.7.5.1.</span> <span class="toc-text">QPainter高级设置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%98%E5%9B%BE%E8%AE%BE%E5%A4%87"><span class="toc-number">1.7.5.2.</span> <span class="toc-text">绘图设备</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#QFile"><span class="toc-number">1.7.6.</span> <span class="toc-text">QFile</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#QFile%E8%BF%9B%E8%A1%8C%E8%AF%BB%E5%86%99%E6%93%8D%E4%BD%9C"><span class="toc-number">1.7.6.1.</span> <span class="toc-text">QFile进行读写操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#QFileInfo%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96%E4%BF%A1%E6%81%AF"><span class="toc-number">1.7.6.2.</span> <span class="toc-text">QFileInfo文件读取信息</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/09/15/QT/" title="QT">QT</a><time datetime="2023-09-15T01:29:15.000Z" title="发表于 2023-09-15 09:29:15">2023-09-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/03/23/JavaWeb/" title="JavaWeb开发">JavaWeb开发</a><time datetime="2023-03-23T02:22:26.000Z" title="发表于 2023-03-23 10:22:26">2023-03-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/03/19/maven/" title="maven">maven</a><time datetime="2023-03-19T07:49:32.000Z" title="发表于 2023-03-19 15:49:32">2023-03-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/03/16/Spring/" title="Spring学习">Spring学习</a><time datetime="2023-03-16T08:25:32.000Z" title="发表于 2023-03-16 16:25:32">2023-03-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/03/16/openmp/" title="多线程随记">多线程随记</a><time datetime="2023-03-16T01:43:07.000Z" title="发表于 2023-03-16 09:43:07">2023-03-16</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 By wzhvv</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://wzhvv.github.io/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>